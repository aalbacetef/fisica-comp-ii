stages:
  - build
  - release


build:
  stage: build
  image: docker
  services: [ "docker:dind" ]
  script:
    - apk update && apk add make
    - sed -i 's/RUNNER := podman/RUNNER := docker/' Makefile 
    - make build-tex-img 
    - make gen-documents 

  artifacts:
    paths:
      - documents/

release_job:
  stage: release
  image: registry.gitlab.com/gitlab-org/release-cli:latest
  rules:
    - if: $CI_COMMIT_TAG                 
  script:
    - echo "running release_job"
  release:                               
    tag_name: '$CI_COMMIT_TAG'
    description: '$CI_COMMIT_TAG'
